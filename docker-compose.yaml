version: '3.7'
services:
    database:
        # check https://hub.docker.com/_/mariadb for info.
        image: 'mariadb:10.4.25'
        environment:
          MYSQL_ALLOW_EMPTY_PASSWORD: yes
        ports:
            # To allow the host machine to access the ports below, modify the lines below.
            # For example, to allow the host to connect to port 3306 on the container, you would change
            # "3306" to "3306:3306". Where the first port is exposed to the host and the second is the container port.
            # See https://docs.docker.com/compose/compose-file/compose-file-v3/#ports for more information.
          - '3306:3306'
        # Run below command in your terminal to see all possible variables and their default values:
        #   mysqld --help --verbose | grep -A 9999 'Variables (--variable-name=value)'
        command: [
          '--character-set-server=utf8mb4',
          '--collation-server=utf8mb4_general_ci',
          '--sql-mode=NO_ZERO_IN_DATE,NO_ZERO_DATE,NO_ENGINE_SUBSTITUTION',
          '--key-buffer-size=33554432',
          '--max-allowed-packet=33554432',
          '--sort-buffer-size=33554432',
          '--net-buffer-length=65536',
          '--read-buffer-size=1048576',
          '--read-rnd-buffer-size=16777216',
          '--myisam-sort-buffer-size=67108864'
        ]
