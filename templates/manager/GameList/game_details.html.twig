<turbo-frame id="gameDetails">
    <div data-modal-default-target="modalBody">
        <div class="modal-body">
            <div class="table-responsive">
                <table class="table table-hover table-border-left"
                    {{ stimulus_controller('game', { id: gameSession.id, name: gameSession.name }) }}>
                    <tr>
                        <th scope="col">Name</th>
                        <td class="text-right">
                            {{ gameSession.name }} &nbsp; 
                            <button class="btn btn-secondary btn-sm" data-action="game#editNameThroughPrompt">
                                <i class="fa fa-edit"></i>
                            </button>
                        </td>
                        <th scope="col">Visibility</th>
                        <td class="text-right">{{ gameSession.gameVisibility}}</td>
                    </tr>
                    <tr>
                        <th scope="col">Simulation state</th>
                        <td class="text-right">{{ gameSession.sessionState }}</td>
                        <th scope="col">Session state</th>
                        <td class="text-right">{{ gameSession.gameState }}</td>
                    </tr>
                    <tr>
                        <th scope="col">Current Month</th>
                        <td class="text-right">{{ gameSession.gameCurrentMonthPretty }}</td>
                        <th scope="col">Ending Month</th>
                        <td class="text-right">{{ gameSession.gameEndMonthPretty }}</td>
                    </tr>
                    <tr>
                        <th scope="col">Setup Time</th>
                        <td class="text-right">{{ gameSession.gameCreationTimePretty }}</td>
                        <th scope="col" >Time Until End</th>
                        <td class="text-right">{{ gameSession.gameRunningTilTimePretty }}</td>
                    </tr>
                    <tr>
                        <th scope="col">Config File</th>
                        <td class="text-right">
                            {{ gameSession.gameConfigVersion.gameConfigFile.fileName }}
                            version {{ gameSession.gameConfigVersion.version }}
                        </td>
                        <th scope="col">Simulation Server</th>
                        <td class="text-right">
                            {{ gameSession.gameWatchdogServer.name}} 
                            ({{ gameSession.gameWatchdogServer.address }})
                        </td>
                    </tr>
                    <tr>
                        <th scope="col">GeoServer</th>
                        <td class="text-right">{{ gameSession.gameGeoServer.name }}</td>
                        <th scop="col">Active Players</th>
                        <td class="text-right">{{ gameSession.playersActive }}</td>
                    </tr>
                    <tr>
                        <td colspan="2">
                        {% if showGameButton('play', gameSession) %}
                            <button class="btn btn-success btn-sm" data-state="play" data-action="game#sessionState">
                                <i class="fa fa-play"></i> Play
                            </button>
                        {% endif %}
                        {% if showGameButton('pause', gameSession) %}
                            <button class="btn btn-success btn-sm" data-state="pause" data-action="game#sessionState">
                                <i class="fa fa-pause"></i> Pause
                            </button>
                        {% endif %}
                        {% if showGameButton('fastforward', gameSession) %}
                            <button class="btn btn-success btn-sm" data-state="play" data-action="game#sessionState">
                                <i class="fa fa-fast-forward"></i> Fast-forward
                            </button>
                        {% endif %}
                        {% if showGameButton('demo', gameSession) %}
                            {% if gameSession.demoSession == 1 %}
                                {% set demoText = 'Disable demo mode' %}
                            {% else %}
                                {% set demoText = 'Enable demo mode' %}
                            {% endif %}
                            <button class="btn btn-info btn-sm" data-action="game#sessionDemo">
                                <i class="fa fa-bookmark"></i> {{ demoText }}
                            </button>
                        {% endif %}
                        </td>
                        <td colspan="2" class="text-right">
                        {% if showGameButton('recreate', gameSession) %}
                            <button class="btn btn-warning btn-sm" data-action="game#sessionRecreate">
                                <i class="fa fa-repeat"></i> Recreate Session
                            </button>
                        {% else %}
                            <button class="btn btn-warning btn-sm" disabled>
                                <i class="fa fa-repeat"></i> Recreate Session
                            </button>
                        {% endif %}
                        {% if showGameButton('archive', gameSession) %}
                            <button class="btn btn-warning btn-sm" data-action="game#sessionArchive">
                                <i class="fa fa-archive"></i> Archive Session
                            </button>
                        {% else %}
                            <button class="btn btn-warning btn-sm" disabled>
                                <i class="fa fa-archive"></i> Archive Session
                            </button>
                        {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                        {% if showGameButton('save', gameSession) %}
                            <button class="btn btn-secondary btn-sm" data-type="full" data-action="game#sessionSave">
                                <i class="fa fa-save"></i> Save Session as File
                            </button>
                            <button class="btn btn-secondary btn-sm" data-type="layers" data-action="game#sessionSave">
                                <i class="fa fa-save"></i> Save All Layers
                            </button>
                        {% else %}
                            <button class="btn btn-secondary btn-sm" disabled>
                                <i class="fa fa-save"></i> Save Session as File
                            </button>
                            <button class="btn btn-secondary btn-sm" disabled>
                                <i class="fa fa-save"></i> Save All Layers
                            </button>
                        {% endif %}
                        </td>
                        <td colspan="2" class="text-right">
                        {% if showGameButton('access', gameSession) %}
                            <button class="btn btn-secondary btn-sm"
                                data-session="{{ gameSession.id }}" 
                                data-action="modal-default#openSessionAccessModal">
                                <i class="fa fa-user"></i> Set User Access
                            </button>
                        {% endif %}
                        {% if showGameButton('export', gameSession) %}
                            <button class="btn btn-secondary btn-sm" data-action="game#sessionExport">
                                <i class="fa fa-file-code-o"></i> Export with Current Plans
                            </button>
                        {% else %}
                            <button class="btn btn-secondary btn-sm" disabled>
                                <i class="fa fa-file-code-o"></i> Export with Current Plans
                            </button>
                        {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4" class="text-left">
                            <button class="btn btn-secondary btn-sm" data-action="click->game#toggleSessionInfoLog">
                                <i class="fa fa-bars" aria-hidden="true"></i> Show/Hide Session Creation Log
                            </button>
                            <div id="sessionInfoLog">
                                <turbo-frame id="gameLogComplete" src="/manager/game/{{ gameSession.id }}/log/complete">
                                </turbo-frame>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</turbo-frame>